# "Количество деревьев в городе"
Этот проект представляет собой веб-приложение на основе FastAPI, которое позволяет пользователям получать информацию о количестве деревьев в заданном городе и году, используя данные OpenStreetMap. Приложение также логирует каждый успешный запрос в базу данных PostgreSQL и позволяет определить город, который запрашивался чаще всего.

## Начало работы
Для запуска проекта вам потребуются Docker и Docker Compose.

## Установка
Клонируйте репозиторий проекта на свою локальную машину:
bash
Copy code
git clone <url_репозитория>
Перейдите в директорию проекта:
bash
```
cd <название_директории_проекта>
```
Создайте файл .env в корне проекта с необходимыми переменными окружения для доступа к базе данных. 

Пример содержимого файла:
```
DB_USER=your_username
DB_PASSWORD=your_password
DB_HOST=db
DB_PORT=5432
DB_NAME=your_database
```
Замените your_username, your_password и your_database на фактические значения.

Запустите приложение и базу данных, используя Docker Compose:
```
docker-compose up --build
После выполнения этих команд приложение должно быть доступно по адресу http://localhost:8000.
```
## Использование
Получение количества деревьев
Для получения количества деревьев отправьте POST-запрос на эндпоинт /trees с JSON в теле запроса, указывая город, страну и год. Пример тела запроса:

```
{
  "city": "Москва",
  "country": "Россия",
  "year": 2021
}
```
В ответе вы получите JSON с информацией о количестве деревьев в указанном городе.

Определение самого запрашиваемого города
Чтобы определить город, который запрашивался чаще всего, воспользуйтесь хранимой процедурой most_requested_city в вашей базе данных PostgreSQL. Пример вызова в SQL:

```
SELECT * FROM most_requested_city();
```
### Технологии
* FastAPI для создания веб-приложения.
* PostgreSQL для хранения данных о запросах.
* Docker и Docker Compose для упрощения развертывания и управления контейнерами.

